"use strict";
/**
* @author Bazzite (https://www.bazzite.com)
* @license MIT License Copyright (c) 2018 Bazzite
*/
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var data_service_1 = require("../shared/data.service");
var core_10_0_2_1 = require("../@ngx-translate/core@10.0.2");
var router_1 = require("@angular/router");
var router_2 = require("nativescript-angular/router");
var confirmation_service_1 = require("./confirmation.service");
var platformModule = require("tns-core-modules/platform");
var appSettings = require("tns-core-modules/application-settings");
var ConfirmationComponent = /** @class */ (function () {
    function ConfirmationComponent(translate, routerExtensions, acRoute, myPostService) {
        var _this = this;
        this.translate = translate;
        this.routerExtensions = routerExtensions;
        this.acRoute = acRoute;
        this.myPostService = myPostService;
        this.transactions = [];
        this.expensesChartDataEn = [];
        this.expensesChartDataEs = [];
        this.currentLanguage = 'en';
        this.country = [];
        // public number=""
        this.cc = "";
        this.input = "";
        this.verifyText = "Please Verify the number +";
        this.data = new data_service_1.DataService();
        this.transactions = this.data.getTransactions();
        this.expensesChartDataEn = [
            { name: "Home", ammount: 90 },
            { name: "Auto & Transport", ammount: 76 },
            { name: "Communication", ammount: 60 },
            { name: "Hotel", ammount: 44 }
        ];
        this.expensesChartDataEs = [
            { name: "Hogar", ammount: 20 },
            { name: "Transporte", ammount: 76 },
            { name: "Comunicaci√≥n", ammount: 60 },
            { name: "Hotel", ammount: 44 }
        ];
        translate.onLangChange.subscribe(function (event) {
            _this.currentLanguage = event.lang;
        });
    }
    ConfirmationComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.acRoute.queryParams.subscribe(function (params) {
            if (params["number"]) {
                _this.verifyText = _this.verifyText + String(params["cc"]) + String(params["number"]);
                _this.number = params['number'];
                _this.cc = params['cc'];
            }
        });
    };
    ConfirmationComponent.prototype.onTap = function (e) {
        var _this = this;
        var cc = String(this.cc);
        var pn = String(this.number);
        var udid = platformModule.device.uuid;
        //900C6D4737B9F7D5
        var data = "udid=" + udid + "&cc=" + cc + "&os=IOS&app_id=1&pn=" + pn + "&code=" + String(this.input);
        console.log(data);
        this.myPostService
            .postData(data)
            .subscribe(function (res) {
            //  this.message = (<any>res).json.data.username;
            console.log(res);
            var code = res.code;
            if (code == 204) {
                var data_1 = res.data;
                appSettings.setString("sip_user", data_1.user);
                appSettings.setString("password", data_1.password);
                appSettings.setString("sip_proxy", data_1.proxy);
                appSettings.setString("sip_transport", data_1.user);
                appSettings.setString("sip_port", data_1.user);
                appSettings.setString("udid", udid);
                _this.routerExtensions.navigate(['home'], {
                    transition: {
                        name: "fade"
                    },
                    queryParams: {
                        number: String(_this.number),
                        cc: String(_this.countryCode)
                    },
                    clearHistory: true
                });
            }
            else {
                alert("error: " + code + " " + res.error);
            }
        });
    };
    ConfirmationComponent = __decorate([
        core_1.Component({
            selector: "Confirmation",
            moduleId: module.id,
            templateUrl: "./confirmation.component.html",
            providers: [confirmation_service_1.MyregisterPostService]
        }),
        __metadata("design:paramtypes", [core_10_0_2_1.TranslateService, router_2.RouterExtensions,
            router_1.ActivatedRoute, confirmation_service_1.MyregisterPostService])
    ], ConfirmationComponent);
    return ConfirmationComponent;
}());
exports.ConfirmationComponent = ConfirmationComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlybWF0aW9uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNvbmZpcm1hdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7RUFHRTs7QUFFRixzQ0FBa0Q7QUFFbEQsdURBQXFEO0FBQ3JELDZEQUFrRjtBQUVsRiwwQ0FBZ0Y7QUFDaEYsc0RBQStEO0FBQy9ELCtEQUErRDtBQUcvRCwwREFBNEQ7QUFDNUQsbUVBQXFFO0FBT3JFO0lBYUksK0JBQW9CLFNBQTJCLEVBQVUsZ0JBQWtDLEVBQ2xGLE9BQXNCLEVBQVMsYUFBb0M7UUFENUUsaUJBd0JDO1FBeEJtQixjQUFTLEdBQVQsU0FBUyxDQUFrQjtRQUFVLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUFDbEYsWUFBTyxHQUFQLE9BQU8sQ0FBZTtRQUFTLGtCQUFhLEdBQWIsYUFBYSxDQUF1QjtRQVY1RSxpQkFBWSxHQUFHLEVBQUUsQ0FBQTtRQUNqQix3QkFBbUIsR0FBRyxFQUFFLENBQUM7UUFDekIsd0JBQW1CLEdBQUcsRUFBRSxDQUFDO1FBSWxCLG9CQUFlLEdBQUcsSUFBSSxDQUFDO1FBNEJ2QixZQUFPLEdBQU8sRUFBRSxDQUFBO1FBQ3hCLG1CQUFtQjtRQUNYLE9BQUUsR0FBQyxFQUFFLENBQUM7UUFDTixVQUFLLEdBQUMsRUFBRSxDQUFDO1FBQ1QsZUFBVSxHQUFDLDRCQUE0QixDQUFBO1FBM0IxQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksMEJBQVcsRUFBRSxDQUFBO1FBRTdCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQTtRQUUvQyxJQUFJLENBQUMsbUJBQW1CLEdBQUc7WUFDdkIsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7WUFDN0IsRUFBRSxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtZQUN6QyxFQUFFLElBQUksRUFBRSxlQUFlLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtZQUN0QyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtTQUNqQyxDQUFBO1FBRUQsSUFBSSxDQUFDLG1CQUFtQixHQUFHO1lBQ3ZCLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO1lBQzlCLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO1lBQ25DLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO1lBQ3JDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO1NBQ2pDLENBQUE7UUFFRCxTQUFTLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxVQUFDLEtBQXNCO1lBQ3BELEtBQUksQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztRQUN0QyxDQUFDLENBQUMsQ0FBQztJQUVQLENBQUM7SUFNRCx3Q0FBUSxHQUFSO1FBQUEsaUJBYUM7UUFYRyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsVUFBQSxNQUFNO1lBR3JDLElBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFDO2dCQUNwQixLQUFJLENBQUMsVUFBVSxHQUFDLEtBQUksQ0FBQyxVQUFVLEdBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQTtnQkFDekUsS0FBSSxDQUFDLE1BQU0sR0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUE7Z0JBQzVCLEtBQUksQ0FBQyxFQUFFLEdBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFBO2FBQ3pCO1FBRUgsQ0FBQyxDQUFDLENBQUE7SUFFTixDQUFDO0lBQ0QscUNBQUssR0FBTCxVQUFNLENBQUM7UUFBUCxpQkErQ0M7UUE5Q0csSUFBSSxFQUFFLEdBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQTtRQUNwQixJQUFJLEVBQUUsR0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1FBQzFCLElBQUksSUFBSSxHQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFBO1FBQ25DLGtCQUFrQjtRQUVaLElBQUksSUFBSSxHQUFDLE9BQU8sR0FBQyxJQUFJLEdBQUMsTUFBTSxHQUFDLEVBQUUsR0FBQyxzQkFBc0IsR0FBQyxFQUFFLEdBQUMsUUFBUSxHQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDekYsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNqQixJQUFJLENBQUMsYUFBYTthQUVqQixRQUFRLENBQUMsSUFBSSxDQUFDO2FBQ2QsU0FBUyxDQUFDLFVBQUEsR0FBRztZQUNaLGlEQUFpRDtZQUNqRCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1lBQ2hCLElBQUksSUFBSSxHQUFPLEdBQUksQ0FBQyxJQUFJLENBQUE7WUFDeEIsSUFBRyxJQUFJLElBQUUsR0FBRyxFQUFDO2dCQUNYLElBQUksTUFBSSxHQUFPLEdBQUksQ0FBQyxJQUFJLENBQUE7Z0JBQ3hCLFdBQVcsQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLE1BQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDN0MsV0FBVyxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsTUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUNqRCxXQUFXLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxNQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQy9DLFdBQVcsQ0FBQyxTQUFTLENBQUMsZUFBZSxFQUFFLE1BQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDbEQsV0FBVyxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsTUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUM3QyxXQUFXLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFDcEMsS0FBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFO29CQUV2QyxVQUFVLEVBQUU7d0JBQ1YsSUFBSSxFQUFFLE1BQU07cUJBQ2I7b0JBQ0QsV0FBVyxFQUFFO3dCQUNYLE1BQU0sRUFBQyxNQUFNLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQzt3QkFDMUIsRUFBRSxFQUFDLE1BQU0sQ0FBQyxLQUFJLENBQUMsV0FBVyxDQUFDO3FCQUk5QjtvQkFDQyxZQUFZLEVBQUUsSUFBSTtpQkFDbkIsQ0FDRixDQUFBO2FBR0E7aUJBRUQ7Z0JBQ0UsS0FBSyxDQUFDLFNBQVMsR0FBQyxJQUFJLEdBQUUsR0FBRyxHQUFPLEdBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTthQUM1QztRQUNILENBQUMsQ0FBQyxDQUFDO0lBRVgsQ0FBQztJQXhHUSxxQkFBcUI7UUFOakMsZ0JBQVMsQ0FBQztZQUNQLFFBQVEsRUFBRSxjQUFjO1lBQ3hCLFFBQVEsRUFBRSxNQUFNLENBQUMsRUFBRTtZQUNuQixXQUFXLEVBQUUsK0JBQStCO1lBQzVDLFNBQVMsRUFBRSxDQUFDLDRDQUFxQixDQUFDO1NBQ3JDLENBQUM7eUNBY2lDLDhCQUFnQixFQUE0Qix5QkFBZ0I7WUFDMUUsdUJBQWMsRUFBd0IsNENBQXFCO09BZG5FLHFCQUFxQixDQTBHakM7SUFBRCw0QkFBQztDQUFBLEFBMUdELElBMEdDO0FBMUdZLHNEQUFxQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuKiBAYXV0aG9yIEJhenppdGUgKGh0dHBzOi8vd3d3LmJhenppdGUuY29tKVxuKiBAbGljZW5zZSBNSVQgTGljZW5zZSBDb3B5cmlnaHQgKGMpIDIwMTggQmF6eml0ZVxuKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuXG5pbXBvcnQgeyBEYXRhU2VydmljZSB9IGZyb20gXCIuLi9zaGFyZWQvZGF0YS5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlLCBMYW5nQ2hhbmdlRXZlbnQgfSBmcm9tICcuLi9Abmd4LXRyYW5zbGF0ZS9jb3JlQDEwLjAuMic7XG5pbXBvcnQgeyByZXF1ZXN0LCBnZXRGaWxlLCBnZXRJbWFnZSwgZ2V0SlNPTiwgZ2V0U3RyaW5nIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvaHR0cFwiO1xuaW1wb3J0IHsgTmF2aWdhdGlvbkVuZCxOYXZpZ2F0aW9uRXh0cmFzICxBY3RpdmF0ZWRSb3V0ZX0gZnJvbSBcIkBhbmd1bGFyL3JvdXRlclwiO1xuaW1wb3J0IHsgUm91dGVyRXh0ZW5zaW9ucyB9IGZyb20gXCJuYXRpdmVzY3JpcHQtYW5ndWxhci9yb3V0ZXJcIjtcbmltcG9ydCB7IE15cmVnaXN0ZXJQb3N0U2VydmljZSB9IGZyb20gXCIuL2NvbmZpcm1hdGlvbi5zZXJ2aWNlXCI7XG5cbmltcG9ydCB7IFNlY3VyZVN0b3JhZ2UgfSBmcm9tIFwibmF0aXZlc2NyaXB0LXNlY3VyZS1zdG9yYWdlXCI7XG5pbXBvcnQgKiBhcyBwbGF0Zm9ybU1vZHVsZSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy9wbGF0Zm9ybVwiO1xuaW1wb3J0ICogYXMgYXBwU2V0dGluZ3MgZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvYXBwbGljYXRpb24tc2V0dGluZ3NcIjtcbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiBcIkNvbmZpcm1hdGlvblwiLFxuICAgIG1vZHVsZUlkOiBtb2R1bGUuaWQsXG4gICAgdGVtcGxhdGVVcmw6IFwiLi9jb25maXJtYXRpb24uY29tcG9uZW50Lmh0bWxcIixcbiAgICBwcm92aWRlcnM6IFtNeXJlZ2lzdGVyUG9zdFNlcnZpY2VdXG59KVxuZXhwb3J0IGNsYXNzIENvbmZpcm1hdGlvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gICAgXG4gICAgXG4gICAgZGF0YTogRGF0YVNlcnZpY2U7XG4gICAgdHJhbnNhY3Rpb25zID0gW11cbiAgICBleHBlbnNlc0NoYXJ0RGF0YUVuID0gW107XG4gICAgZXhwZW5zZXNDaGFydERhdGFFcyA9IFtdO1xuICAgIHB1YmxpYyBpbmRleDogbnVtYmVyO1xuICAgIHB1YmxpYyBudW1iZXI6c3RyaW5nXG4gICAgcHVibGljIGNvdW50cnlDb2RlOnN0cmluZ1xuICAgIHB1YmxpYyBjdXJyZW50TGFuZ3VhZ2UgPSAnZW4nO1xuXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRyYW5zbGF0ZTogVHJhbnNsYXRlU2VydmljZSwgcHJpdmF0ZSByb3V0ZXJFeHRlbnNpb25zOiBSb3V0ZXJFeHRlbnNpb25zLFxuICAgICAgcHVibGljIGFjUm91dGU6QWN0aXZhdGVkUm91dGUscHJpdmF0ZSBteVBvc3RTZXJ2aWNlOiBNeXJlZ2lzdGVyUG9zdFNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IERhdGFTZXJ2aWNlKClcblxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9ucyA9IHRoaXMuZGF0YS5nZXRUcmFuc2FjdGlvbnMoKVxuXG4gICAgICAgIHRoaXMuZXhwZW5zZXNDaGFydERhdGFFbiA9IFtcbiAgICAgICAgICAgIHsgbmFtZTogXCJIb21lXCIsIGFtbW91bnQ6IDkwIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiQXV0byAmIFRyYW5zcG9ydFwiLCBhbW1vdW50OiA3NiB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcIkNvbW11bmljYXRpb25cIiwgYW1tb3VudDogNjAgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJIb3RlbFwiLCBhbW1vdW50OiA0NCB9XG4gICAgICAgIF1cblxuICAgICAgICB0aGlzLmV4cGVuc2VzQ2hhcnREYXRhRXMgPSBbXG4gICAgICAgICAgICB7IG5hbWU6IFwiSG9nYXJcIiwgYW1tb3VudDogMjAgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJUcmFuc3BvcnRlXCIsIGFtbW91bnQ6IDc2IH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiQ29tdW5pY2FjacOzblwiLCBhbW1vdW50OiA2MCB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcIkhvdGVsXCIsIGFtbW91bnQ6IDQ0IH1cbiAgICAgICAgXVxuXG4gICAgICAgIHRyYW5zbGF0ZS5vbkxhbmdDaGFuZ2Uuc3Vic2NyaWJlKChldmVudDogTGFuZ0NoYW5nZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRMYW5ndWFnZSA9IGV2ZW50Lmxhbmc7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9XG4gICAgcHVibGljIGNvdW50cnk6YW55W109W11cbiAgIC8vIHB1YmxpYyBudW1iZXI9XCJcIlxuICAgIHB1YmxpYyBjYz1cIlwiO1xuICAgIHB1YmxpYyBpbnB1dD1cIlwiO1xuICAgIHB1YmxpYyB2ZXJpZnlUZXh0PVwiUGxlYXNlIFZlcmlmeSB0aGUgbnVtYmVyICtcIlxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5hY1JvdXRlLnF1ZXJ5UGFyYW1zLnN1YnNjcmliZShwYXJhbXMgPT4ge1xuXG4gICAgICAgICAgXG4gICAgICAgICAgICBpZihwYXJhbXNbXCJudW1iZXJcIl0pe1xuICAgICAgICAgICAgdGhpcy52ZXJpZnlUZXh0PXRoaXMudmVyaWZ5VGV4dCtTdHJpbmcocGFyYW1zW1wiY2NcIl0pK1N0cmluZyhwYXJhbXNbXCJudW1iZXJcIl0pXG4gICAgICAgICAgICAgICAgdGhpcy5udW1iZXI9cGFyYW1zWydudW1iZXInXVxuICAgICAgICAgICAgICAgIHRoaXMuY2M9cGFyYW1zWydjYyddXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICB9XG4gICAgb25UYXAoZSl7XG4gICAgICAgIGxldCBjYz1TdHJpbmcodGhpcy5jYylcbiAgICAgICAgICBsZXQgcG49U3RyaW5nKHRoaXMubnVtYmVyKVxuICAgICAgICAgIGxldCB1ZGlkPXBsYXRmb3JtTW9kdWxlLmRldmljZS51dWlkXG4gICAgICAgICAgLy85MDBDNkQ0NzM3QjlGN0Q1XG4gICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGRhdGE9XCJ1ZGlkPVwiK3VkaWQrXCImY2M9XCIrY2MrXCImb3M9SU9TJmFwcF9pZD0xJnBuPVwiK3BuK1wiJmNvZGU9XCIrU3RyaW5nKHRoaXMuaW5wdXQpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgICAgICAgICAgdGhpcy5teVBvc3RTZXJ2aWNlXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5wb3N0RGF0YShkYXRhKVxuICAgICAgICAgICAgLnN1YnNjcmliZShyZXMgPT4ge1xuICAgICAgICAgICAgICAvLyAgdGhpcy5tZXNzYWdlID0gKDxhbnk+cmVzKS5qc29uLmRhdGEudXNlcm5hbWU7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgICAgICAgbGV0IGNvZGU9KDxhbnk+cmVzKS5jb2RlXG4gICAgICAgICAgICAgIGlmKGNvZGU9PTIwNCl7XG4gICAgICAgICAgICAgICAgbGV0IGRhdGE9KDxhbnk+cmVzKS5kYXRhXG4gICAgICAgICAgICAgICAgYXBwU2V0dGluZ3Muc2V0U3RyaW5nKFwic2lwX3VzZXJcIiwgZGF0YS51c2VyKTtcbiAgICAgICAgICAgICAgICBhcHBTZXR0aW5ncy5zZXRTdHJpbmcoXCJwYXNzd29yZFwiLCBkYXRhLnBhc3N3b3JkKTtcbiAgICAgICAgICAgICAgICBhcHBTZXR0aW5ncy5zZXRTdHJpbmcoXCJzaXBfcHJveHlcIiwgZGF0YS5wcm94eSk7XG4gICAgICAgICAgICAgICAgYXBwU2V0dGluZ3Muc2V0U3RyaW5nKFwic2lwX3RyYW5zcG9ydFwiLCBkYXRhLnVzZXIpO1xuICAgICAgICAgICAgICAgIGFwcFNldHRpbmdzLnNldFN0cmluZyhcInNpcF9wb3J0XCIsIGRhdGEudXNlcik7XG4gICAgICAgICAgICAgICAgYXBwU2V0dGluZ3Muc2V0U3RyaW5nKFwidWRpZFwiLCB1ZGlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlckV4dGVuc2lvbnMubmF2aWdhdGUoWydob21lJ10sIHtcbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJmYWRlXCJcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBxdWVyeVBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBudW1iZXI6U3RyaW5nKHRoaXMubnVtYmVyKSxcbiAgICAgICAgICAgICAgICAgICAgY2M6U3RyaW5nKHRoaXMuY291bnRyeUNvZGUpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGNsZWFySGlzdG9yeTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhbGVydChcImVycm9yOiBcIitjb2RlKyBcIiBcIisoPGFueT5yZXMpLmVycm9yKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICB9XG4gICAgXG59XG4iXX0=